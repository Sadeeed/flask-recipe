{% extends 'layouts/base.html' %}

{% block content %}
    <div class="mt-4">
        <h1>Add Recipe</h1>
        <form method="POST">
            <div class="mb-3">
                <label for="name" class="form-label">Name</label>
                <input type="text" class="form-control" id="name" name="name" value="{{ name }}">
            </div>
            <div class="mb-3" id="ingredient-list">
                <p>Ingredients</p>
                {% for ingredient in ingredients %}
                    <input type="text" class="form-control mt-1" id="ingr-{{ loop.index0 }}" name="ingr-{{ loop.index0 }}" placeholder="Ingredient {{ loop.index }}" value="{{ ingredient.name }}">
                {% endfor %}
            </div>
            <div class="mb-3">
                <label for="method" class="form-label">Instructions</label>
                <textarea class="form-control" id="method" name="method">{{ method }}</textarea>
            </div>
            <button class="btn btn-primary">Submit</button>
        </form>
    </div>
{% endblock %}

{#{% block extraJs %}#}
{#    <script>#}
{#        let ingredient_count = 1#}
{#        const addIngredient = () => {#}
{#            let ingredient_list = document.getElementById('ingredient-list')#}
{#            let new_ingredient_input = `<input type="text" class="form-control mt-1" id="ingr-${ingredient_count}" name="ingr-${ingredient_count}" placeholder="Ingredient ${ingredient_count+1}">`#}
{#            ingredient_count += 1#}
{##}
{#let span = document.createElement('span')#}
{#span.innerHTML = new_ingredient_input#}
{#ingredient_list.insertAdjacentElement("beforeend", span)#}
{#            ingredient_list.insertAdjacentHTML("beforeend", new_ingredient_input)#}
{#        }#}
{#    </script>#}
{#{% endblock %}#}